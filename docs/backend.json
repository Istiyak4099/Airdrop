
{
  "entities": {
    "UserAccount": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserAccount",
      "type": "object",
      "description": "Represents a business or individual user of the Aether Assistant platform.",
      "properties": {
        "id": { "type": "string" },
        "businessName": { "type": "string" },
        "contactEmail": { "type": "string", "format": "email" },
        "subscriptionPlanId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "businessName", "contactEmail", "subscriptionPlanId", "createdAt", "updatedAt"]
    },
    "FacebookPage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FacebookPage",
      "type": "object",
      "description": "Stores Facebook Page credentials linked to a UserAccount for webhook processing.",
      "properties": {
        "pageId": { "type": "string" },
        "pageAccessToken": { "type": "string" },
        "pageName": { "type": "string" },
        "userAccountId": { "type": "string" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["pageId", "pageAccessToken", "userAccountId", "updatedAt"]
    },
    "Conversation": {
      "title": "Conversation",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "integrationId": { "type": "string" },
        "customerId": { "type": "string" },
        "customerName": { "type": "string" },
        "status": { "type": "string" },
        "lastMessageTimestamp": { "type": "string", "format": "date-time" },
        "userAccountId": { "type": "string" }
      },
      "required": ["id", "customerId", "status", "userAccountId"]
    },
    "Message": {
      "title": "Message",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "conversationId": { "type": "string" },
        "senderType": { "type": "string", "enum": ["user", "ai"] },
        "content": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "userAccountId": { "type": "string" }
      },
      "required": ["id", "conversationId", "senderType", "content", "timestamp", "userAccountId"]
    }
  },
  "auth": {
    "providers": ["password", "google"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/userAccounts/{userAccountId}",
        "definition": {
          "entityName": "UserAccount",
          "schema": { "$ref": "#/backend/entities/UserAccount" },
          "description": "User profile data."
        }
      },
      {
        "path": "/facebook_pages/{pageId}",
        "definition": {
          "entityName": "FacebookPage",
          "schema": { "$ref": "#/backend/entities/FacebookPage" },
          "description": "Facebook Page credentials for automated replies."
        }
      },
      {
        "path": "/userAccounts/{userAccountId}/conversations/{conversationId}",
        "definition": {
          "entityName": "Conversation",
          "schema": { "$ref": "#/backend/entities/Conversation" },
          "description": "Messenger conversations."
        }
      },
      {
        "path": "/userAccounts/{userAccountId}/conversations/{conversationId}/messages/{messageId}",
        "definition": {
          "entityName": "Message",
          "schema": { "$ref": "#/backend/entities/Message" },
          "description": "Individual chat messages."
        }
      }
    ]
  }
}
